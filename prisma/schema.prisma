generator client {
  provider   = "prisma-client-js"
  engineType = "binary"
}

datasource db {
  provider = "postgresql"
}

model events {
  event_id   Int       @id @default(autoincrement())
  user_id    String?   @db.VarChar(191)
  title      String?
  content    String?
  is_active  Int?      @default(0) @db.SmallInt
  created_at DateTime? @default(now()) @db.Timestamp(6)
  users      users?    @relation(fields: [user_id], references: [user_id], onUpdate: NoAction)

  @@index([user_id])
}

model requests {
  id        Int      @id @default(autoincrement())
  title     String   @db.VarChar(191)
  content   String?
  status    String   @default("open") @db.VarChar(191)
  createdAt DateTime @default(now()) @db.Timestamp(6)
  room_id   Int?
  rooms     rooms?   @relation(fields: [room_id], references: [room_id])

  @@index([room_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model rooms {
  room_id      Int        @id @default(autoincrement())
  name         String     @db.VarChar(50)
  title        String?
  status       String?    @default("idle") @db.VarChar(255)
  tag          Json?      @db.Json
  viewer_count Int?       @default(0)
  host_id      String?    @db.VarChar(191)
  created_at   DateTime?  @default(now()) @db.Timestamp(6)
  requests     requests[]
  users        users[]

  @@index([host_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model shop_items {
  items_id    String       @id @db.VarChar(20)
  name        String       @db.VarChar(50)
  category    String?      @db.VarChar(255)
  price       Int
  description String?
  image_url   String?      @db.VarChar(255)
  is_active   Int?         @default(0) @db.SmallInt
  stock       Int?         @default(-1)
  user_items  user_items[]
}

model user_items {
  transaction_id Int        @id @default(autoincrement())
  user_id        String     @db.VarChar(191)
  item_id        String     @db.VarChar(20)
  quantity       Int?       @default(1)
  created_at     DateTime?  @default(now()) @db.Timestamp(6)
  shop_items     shop_items @relation(fields: [item_id], references: [items_id], onDelete: Cascade, onUpdate: NoAction)
  users          users      @relation(fields: [user_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)

  @@index([item_id])
  @@index([user_id])
}

model users {
  user_id      String       @id @db.VarChar(191)
  name         String       @db.VarChar(50)
  bio          String?
  level        Int?         @default(1)
  coins        Int?         @default(100)
  avatar_url   String?      @db.VarChar(255)
  stealth      Int?         @default(0) @db.SmallInt
  accept_match Int?         @default(0) @db.SmallInt
  created_at   DateTime?    @default(now()) @db.Timestamp(6)
  room_id      Int?
  events       events[]
  user_items   user_items[]
  rooms        rooms?       @relation(fields: [room_id], references: [room_id], onUpdate: NoAction)

  @@index([room_id])
}
